frameworkVersion: '>3.24.0'

service: {{.ServiceName}}
provider:
  name: aws
  ecr:
    images:
      faasimage:
        path: ./
  runtime: go1.x
  # Default memory size for functions (default: 1024MB)
  memorySize: 1024
  # Default timeout for functions (default: 6 seconds)
  # Note: API Gateway has a maximum timeout of 30 seconds
  #timeout: 60
  # Use function versioning (enabled by default)
  versionFunctions: false
  # By default, one IAM Role is shared by all the Lambda functions in your service
  iamRoleStatements:
    - Effect: Allow
      Action:
        - "dynamodb:*"
      Resource:
        - "*"

package:
  individually: false

functions:
{{range .DefaultRepos}}
  {{.OperationName}}{{.TypeName}}:
    name: {{.OperationName}}{{.TypeName}}
    image:
      name: faasimage	
      command:
        - {{.OperationName}}{{.TypeName}}
      entryPoint:
        - '/lambda-entrypoint.sh'
    maximumRetryAttempts: 0
    maximumEventAge: 60
{{end}}
{{range .CustomRepos}}
  {{.OperationName}}{{.TypeName}}:
    name: {{.OperationName}}{{.TypeName}}
    image:
      name: faasimage	
      command:
        - {{.OperationName}}{{.TypeName}}
    maximumRetryAttempts: 0
    maximumEventAge: 60
{{end}}
{{range .StateFuncs}}
  {{.OwnerType}}{{.HandlerNameWithoutSuffix}}:
    name:  {{.OwnerType}}{{.HandlerNameWithoutSuffix}}
    image:
      name: faasimage	
      command:
        - {{.OwnerType}}{{.HandlerNameWithoutSuffix}}
    maximumRetryAttempts: 0
    maximumEventAge: 60
{{end}}